jQuery(document).ready(function(i){var a={"Свободный участок":"#91CD2F","Участок с готовым домом":"#7113BA","Участок со строящимся домом":"#1665FF","Забронированный участок":"#fff","Проданный участок":"#A62E1B"};function c(t,o){a[o]&&(i(t).css("fill",a[o]),i(".location__status").css("color",a[o]))}function o(t,o){i(".location__title > span").text(t.attr("data-locationnumber")),i(".location__status > span").text(t.attr("data-locationname")),i(".location__area > span").text(t.attr("data-locationarea")),i(".location__price > span").text(t.attr("data-locationprice"));var a=t.attr("data-locationname"),t=(c(t,a),"Проданный участок"===a),a=(i(".location__price, .balloon__button--1, .balloon__button--2").toggle(!t),map.getBoundingClientRect()),t=o.clientX-a.left,o=o.clientY-a.top,a=i(".balloon"),n=a.outerHeight()||150,l=a.outerWidth()||200;a.css({position:"absolute",left:"".concat(t-l/2,"px"),top:"".concat(o-n-10,"px"),display:"block"})}function n(){i(".balloon").hide()}i("path[data-locationtype='location']").each(function(){c(this,i(this).attr("data-locationname"))}),window.innerWidth<=1024?i("#map").on("click","path[data-locationtype='location']",function(t){o(i(this),t)}):(i("#map").on("mouseenter","path[data-locationtype='location']",function(t){o(i(this),t)}),i("#map").on("mouseleave","path[data-locationtype='location']",function(){n()})),i(".balloon__close-button").on("click",function(t){t.preventDefault(),n()}),i(window).on("scroll",n),i("#map").on("scroll wheel",n),i(document).on("click",function(t){i(".balloon").is(":visible")&&!i(t.target).closest('.balloon, path[data-locationtype="location"]').length&&n()})});
$(function(){var o=$("#map"),c=$("#svg"),a=$("#inner"),n=c[0].viewBox.baseVal,l=n.width,u=n.height,r=1,h={x:0,y:0},s=!1,x={x:0,y:0},f=null,g=null;function y(n,t,e){return Math.max(t,Math.min(e,n))}function m(){return Math.max(o.width()/l,o.height()/u)}function v(n,t){n?"touch"===(1<arguments.length&&void 0!==t?t:"mouse")?a.css("transition","transform 0.05s linear"):a.css("transition","transform 0.2s ease-out"):a.css("transition","none")}function w(){var n=o.width(),t=o.height(),e=l*r,i=u*r,n=Math.min(0,n-e),e=Math.min(0,t-i);h.x=y(h.x,n,0),h.y=y(h.y,e,0),a.css("transform","translate(".concat(h.x,"px, ").concat(h.y,"px) scale(").concat(r,")"))}function t(){var n=o.width(),t=o.height(),e=(r=Math.max(n/l,t/u),l*r),i=u*r;h.x=(n-e)/2,h.y=(t-i)/2,w()}function d(n,t){var e=t.clientX-n.clientX;return Math.hypot(e,t.clientY-n.clientY)}function Y(n,t){return{x:(n.clientX+t.clientX)/2,y:(n.clientY+t.clientY)/2}}c.on("mousedown",function(n){v(!(s=!0)),x={x:n.clientX-h.x,y:n.clientY-h.y},c.css("cursor","grabbing")}),$(window).on("mousemove",function(n){s&&(h={x:n.clientX-x.x,y:n.clientY-x.y},w())}),$(window).on("mouseup",function(){s=!1,c.css("cursor","grab")}),c.on("wheel",function(n){n.preventDefault(),v(!0,"mouse");var t=r,e=(r+=5e-4*-n.originalEvent.deltaY,r=Math.max(r,m()),c[0].getBoundingClientRect()),i=n.clientX-e.left-h.x,n=n.clientY-e.top-h.y;h.x-=i*(r/t-1),h.y-=n*(r/t-1),w()}),c.on("touchstart",function(n){v(!0,"touch");var t,n=n.originalEvent.touches;1===n.length?(s=!0,t=n[0],x={x:t.clientX-h.x,y:t.clientY-h.y}):2===n.length&&(f=d(n[0],n[1]),g=Y(n[0],n[1]))}),c.on("touchmove",function(n){n.preventDefault(),v(!0,"touch");var t,e,i,o,n=n.originalEvent.touches;1===n.length&&s?(t=n[0],h={x:t.clientX-x.x,y:t.clientY-x.y},w()):2===n.length&&(t=d(n[0],n[1]),n=Y(n[0],n[1]),f&&g&&(e=r,r*=t/f,r=Math.max(r,m()),i=n.x-h.x,o=n.y-h.y,h.x-=i*(r/e-1),h.y-=o*(r/e-1),w()),f=t,g=n)}),c.on("touchend",function(n){n=n.originalEvent.touches;n.length<2&&(g=f=null),0===n.length&&(s=!1)}),$(window).on("resize",t),t()});
//# sourceMappingURL=main.min.js.map
